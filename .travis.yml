language: cpp

compiler:
  - gcc
  - clang

before_install:
 - lsb_release --all
 - sudo apt-get update
 - sudo apt-get upgrade

install:
 - sudo apt-get install build-essential
 - sudo apt-get install cmake
 - sudo apt-get install libboost-all-dev
 - sudo apt-get install libhtmlcxx-dev
 - sudo apt-get install libcurl4-*-dev
 - sudo apt-get install wget

before_script:
 - export src_dir=$(pwd)
 - export build_dir=$(mktemp --directory) 
 - mkdir --parents "$build_dir/coil"
 - mkdir --parents "$build_dir/triangle"
 - mkdir --parents "$build_dir/thread-pool"
 - mkdir --parents "$build_dir/boost"
 - export url=http://sourceforge.net/projects/boost/files/boost/1.55.0/boost_1_55_0.tar.gz/download
 - wget -qO- "$url" | tar xz --strip-component=1 -C "$build_dir/boost"
 - cd "$build_dir/boost"
 - ./bootstrap.sh
 - ./b2 
 

script:
 - cd "$build_dir/coil" && cmake -DBOOST_ROOT="$build_dir/boost" "$src_dir/coil" && make && ./test
 - cd "$build_dir/triangle" && cmake -DBOOST_ROOT="$build_dir/boost" "$src_dir/triangle" && make
 - cd "$build_dir/thread-pool" && cmake -DBOOST_ROOT="$build_dir/boost" "$src_dir/thread-pool" && make
 